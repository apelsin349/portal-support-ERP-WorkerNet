# üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ WorkerNet Portal

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ WorkerNet Portal, –≤–∫–ª—é—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. Clean Architecture

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ models/          # Django –º–æ–¥–µ–ª–∏ (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îÇ   ‚îú‚îÄ‚îÄ api/             # REST API (–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ views/       # API –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ serializers/ # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ urls/        # URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/            # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/       # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exceptions/  # –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ tasks/           # Celery –∑–∞–¥–∞—á–∏
```

#### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```python
# app/models/ticket.py
from django.db import models
from django.contrib.auth import get_user_model

User = get_user_model()

class Ticket(models.Model):
    STATUS_CHOICES = [
        ('open', '–û—Ç–∫—Ä—ã—Ç'),
        ('in_progress', '–í —Ä–∞–±–æ—Ç–µ'),
        ('resolved', '–†–µ—à–µ–Ω'),
        ('closed', '–ó–∞–∫—Ä—ã—Ç'),
    ]
    
    title = models.CharField(max_length=200)
    description = models.TextField()
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='open')
    created_by = models.ForeignKey(User, on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'tickets'
        verbose_name = '–¢–∏–∫–µ—Ç'
        verbose_name_plural = '–¢–∏–∫–µ—Ç—ã'
    
    def __str__(self):
        return f"TK-{self.id:08d}: {self.title}"
```

### 2. Domain-Driven Design (DDD)

#### –ê–≥—Ä–µ–≥–∞—Ç—ã –∏ —Å—É—â–Ω–æ—Å—Ç–∏
```python
# domain/aggregates/ticket_aggregate.py
from dataclasses import dataclass
from typing import List
from .entities.ticket import Ticket
from .entities.comment import Comment
from .value_objects.ticket_id import TicketId

@dataclass
class TicketAggregate:
    ticket: Ticket
    comments: List[Comment]
    
    def add_comment(self, content: str, author_id: int) -> None:
        comment = Comment(
            content=content,
            author_id=author_id,
            ticket_id=self.ticket.id
        )
        self.comments.append(comment)
    
    def change_status(self, new_status: TicketStatus) -> None:
        if self.ticket.status == TicketStatus.CLOSED:
            raise ValueError("Cannot change status of closed ticket")
        self.ticket.status = new_status
```

#### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
```python
# domain/repositories/ticket_repository.py
from abc import ABC, abstractmethod
from typing import List, Optional
from .entities.ticket import Ticket

class TicketRepository(ABC):
    @abstractmethod
    def save(self, ticket: Ticket) -> Ticket:
        pass
    
    @abstractmethod
    def find_by_id(self, ticket_id: int) -> Optional[Ticket]:
        pass
    
    @abstractmethod
    def find_by_status(self, status: str) -> List[Ticket]:
        pass
```

### 3. CQRS (Command Query Responsibility Segregation)

#### –ö–æ–º–∞–Ω–¥—ã
```python
# application/commands/create_ticket_command.py
from dataclasses import dataclass
from typing import Optional

@dataclass
class CreateTicketCommand:
    title: str
    description: str
    priority: str
    category: str
    created_by_id: int
    assigned_to_id: Optional[int] = None
```

#### –ó–∞–ø—Ä–æ—Å—ã
```python
# application/queries/get_tickets_query.py
from dataclasses import dataclass
from typing import Optional, List
from .dto.ticket_dto import TicketDto

@dataclass
class GetTicketsQuery:
    status: Optional[str] = None
    priority: Optional[str] = None
    assigned_to: Optional[int] = None
    limit: int = 20
    offset: int = 0

@dataclass
class GetTicketsResult:
    tickets: List[TicketDto]
    total_count: int
```

#### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
```python
# application/handlers/create_ticket_handler.py
from ..commands.create_ticket_command import CreateTicketCommand
from ..repositories.ticket_repository import TicketRepository
from ..services.notification_service import NotificationService

class CreateTicketHandler:
    def __init__(
        self,
        ticket_repository: TicketRepository,
        notification_service: NotificationService
    ):
        self.ticket_repository = ticket_repository
        self.notification_service = notification_service
    
    def handle(self, command: CreateTicketCommand) -> Ticket:
        ticket = Ticket(
            title=command.title,
            description=command.description,
            priority=command.priority,
            category=command.category,
            created_by_id=command.created_by_id,
            assigned_to_id=command.assigned_to_id
        )
        
        saved_ticket = self.ticket_repository.save(ticket)
        
        # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        self.notification_service.send_ticket_created_notification(saved_ticket)
        
        return saved_ticket
```

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. Code Quality

#### Pre-commit hooks
```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-added-large-files
      - id: check-merge-conflict

  - repo: https://github.com/psf/black
    rev: 23.3.0
    hooks:
      - id: black
        language_version: python3.11

  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: ["--profile", "black"]

  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8
        args: [--max-line-length=88, --extend-ignore=E203]

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.3.0
    hooks:
      - id: mypy
        additional_dependencies: [types-all]
```

#### ESLint –∏ Prettier
```json
// .eslintrc.js
module.exports = {
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
    'plugin:react/recommended',
    'plugin:react-hooks/recommended',
  ],
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint', 'react', 'react-hooks'],
  rules: {
    'react/prop-types': 'off',
    '@typescript-eslint/explicit-function-return-type': 'off',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
    '@typescript-eslint/no-explicit-any': 'warn',
  },
  settings: {
    react: {
      version: 'detect',
    },
  },
};
```

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false
}
```

### 2. Testing

#### Pytest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```python
# pytest.ini
[tool:pytest]
DJANGO_SETTINGS_MODULE = config.settings.test
python_files = tests.py test_*.py *_tests.py
python_classes = Test*
python_functions = test_*
addopts = 
    --cov=.
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=80
    --strict-markers
    --disable-warnings
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
```

#### Jest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```javascript
// jest.config.js
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/src/setupTests.ts'],
  moduleNameMapping: {
    '^@/(.*)$': '<rootDir>/src/$1',
  },
  collectCoverageFrom: [
    'src/**/*.{ts,tsx}',
    '!src/**/*.d.ts',
    '!src/index.tsx',
    '!src/reportWebVitals.ts',
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
  testMatch: [
    '<rootDir>/src/**/__tests__/**/*.{ts,tsx}',
    '<rootDir>/src/**/*.{test,spec}.{ts,tsx}',
  ],
};
```

### 3. CI/CD

#### GitHub Actions
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      postgres:
        image: postgres:15
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: test_db
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      
      redis:
        image: redis:7
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
        cache-dependency-path: frontend/package-lock.json
    
    - name: Install Python dependencies
      run: |
        cd backend
        pip install -r requirements.txt
        pip install -r requirements-dev.txt
    
    - name: Install Node.js dependencies
      run: |
        cd frontend
        npm ci
    
    - name: Run Python tests
      run: |
        cd backend
        python manage.py test
      env:
        DATABASE_URL: postgresql://postgres:postgres@localhost:5432/test_db
        REDIS_URL: redis://localhost:6379/0
    
    - name: Run Node.js tests
      run: |
        cd frontend
        npm test -- --coverage --watchAll=false
    
    - name: Run E2E tests
      run: |
        cd frontend
        npm run cypress:run
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        files: ./backend/coverage.xml,./frontend/coverage/lcov.info

  build:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v2
    
    - name: Login to Docker Hub
      uses: docker/login-action@v2
      with:
        username: ${{ secrets.DOCKER_USERNAME }}
        password: ${{ secrets.DOCKER_PASSWORD }}
    
    - name: Build and push Docker images
      uses: docker/build-push-action@v4
      with:
        context: .
        push: true
        tags: |
          workernet/backend:latest
          workernet/backend:${{ github.sha }}
          workernet/frontend:latest
          workernet/frontend:${{ github.sha }}

  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to production
      run: |
        echo "Deploying to production..."
        # –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
```

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. Git Flow

#### –í–µ—Ç–∫–∏
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏
main        # –ü—Ä–æ–¥–∞–∫—à–Ω –∫–æ–¥
develop     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –≤–µ—Ç–∫–∞

# –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏
feature/*   # –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
release/*   # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ª–∏–∑–∞
hotfix/*    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

#### Workflow
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ feature –≤–µ—Ç–∫–∏
git checkout develop
git pull origin develop
git checkout -b feature/new-feature

# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
git add .
git commit -m "feat: add new feature"
git push origin feature/new-feature

# –°–æ–∑–¥–∞–Ω–∏–µ Pull Request
# –ü–æ—Å–ª–µ review –∏ approval:
git checkout develop
git pull origin develop
git merge feature/new-feature
git push origin develop
git branch -d feature/new-feature
```

### 2. Conventional Commits

#### –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–æ–≤
```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

#### –¢–∏–ø—ã –∫–æ–º–º–∏—Ç–æ–≤
```
feat:     –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
fix:      –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
docs:     –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
style:    —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
refactor: —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
test:     –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
chore:    –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```

#### –ü—Ä–∏–º–µ—Ä—ã
```bash
feat(auth): add JWT token refresh functionality
fix(api): resolve CORS issue with frontend
docs(readme): update installation instructions
style(components): format code with prettier
refactor(services): extract ticket service logic
test(api): add integration tests for ticket endpoints
chore(deps): update Django to 4.2.1
```

### 3. Code Review

#### Checklist –¥–ª—è —Ä–µ–≤—å—é–µ—Ä–∞
- [ ] –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –¢–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ù–µ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–µ–Ω–∞
- [ ] –ö–æ–¥ —á–∏—Ç–∞–µ–º –∏ –ø–æ–Ω—è—Ç–µ–Ω
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

#### Checklist –¥–ª—è –∞–≤—Ç–æ—Ä–∞
- [ ] –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –õ–∏–Ω—Ç–µ—Ä—ã –Ω–µ –≤—ã–¥–∞—é—Ç –æ—à–∏–±–æ–∫
- [ ] –ö–æ–º–º–∏—Ç—ã —Å–ª–µ–¥—É—é—Ç conventional commits
- [ ] PR —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [ ] –°–≤—è–∑–∞–Ω–Ω—ã–µ issues —É–ø–æ–º—è–Ω—É—Ç—ã

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. OWASP Top 10

#### –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ORM –≤–º–µ—Å—Ç–æ —Å—ã—Ä—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤
from django.db import models

class Ticket(models.Model):
    title = models.CharField(max_length=200)
    
    @classmethod
    def search_by_title(cls, search_term: str):
        # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ ORM
        return cls.objects.filter(title__icontains=search_term)
```

#### –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö
from django.utils.html import escape

def render_ticket_title(title: str) -> str:
    return escape(title)

# –í React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
const TicketTitle = ({ title }) => {
  return <h2>{title}</h2>; // React –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —ç–∫—Ä–∞–Ω–∏—Ä—É–µ—Ç
};
```

#### CSRF –∑–∞—â–∏—Ç–∞
```python
# Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç CSRF
from django.views.decorators.csrf import csrf_exempt
from django.utils.decorators import method_decorator

# –¢–æ–ª—å–∫–æ –¥–ª—è API endpoints, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –Ω—É–∂–¥–∞—é—Ç—Å—è –≤ CSRF
@method_decorator(csrf_exempt, name='dispatch')
class APIView(View):
    pass
```

### 2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### JWT —Ç–æ–∫–µ–Ω—ã
```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ JWT
from rest_framework_simplejwt.settings import api_settings

api_settings.ACCESS_TOKEN_LIFETIME = timedelta(hours=1)
api_settings.REFRESH_TOKEN_LIFETIME = timedelta(days=7)
api_settings.ROTATE_REFRESH_TOKENS = True
api_settings.BLACKLIST_AFTER_ROTATION = True
```

#### RBAC (Role-Based Access Control)
```python
# –ú–æ–¥–µ–ª—å —Ä–æ–ª–µ–π
class Role(models.Model):
    name = models.CharField(max_length=50, unique=True)
    permissions = models.ManyToManyField(Permission)

class User(AbstractUser):
    role = models.ForeignKey(Role, on_delete=models.CASCADE)
    
    def has_permission(self, permission: str) -> bool:
        return self.role.permissions.filter(codename=permission).exists()
```

### 3. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
```python
# Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö—ç—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª–∏
from django.contrib.auth.hashers import make_password, check_password

password = "user_password"
hashed = make_password(password)
is_valid = check_password(password, hashed)
```

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
from cryptography.fernet import Fernet
from django.conf import settings

class EncryptionService:
    def __init__(self):
        self.cipher = Fernet(settings.ENCRYPTION_KEY)
    
    def encrypt(self, data: str) -> str:
        return self.cipher.encrypt(data.encode()).decode()
    
    def decrypt(self, encrypted_data: str) -> str:
        return self.cipher.decrypt(encrypted_data.encode()).decode()
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –ò–Ω–¥–µ–∫—Å—ã
```python
# –ú–æ–¥–µ–ª—å —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
class Ticket(models.Model):
    title = models.CharField(max_length=200, db_index=True)
    status = models.CharField(max_length=20, db_index=True)
    priority = models.CharField(max_length=20, db_index=True)
    created_at = models.DateTimeField(auto_now_add=True, db_index=True)
    
    class Meta:
        indexes = [
            models.Index(fields=['status', 'priority']),
            models.Index(fields=['created_at', 'status']),
        ]
```

#### Query optimization
```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ select_related –∏ prefetch_related
tickets = Ticket.objects.select_related('created_by', 'assigned_to').prefetch_related('comments', 'tags').all()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ only() –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–ª–µ–π
tickets = Ticket.objects.only('id', 'title', 'status').all()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ defer() –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–µ–π
tickets = Ticket.objects.defer('description', 'custom_fields').all()
```

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': 'redis://127.0.0.1:6379/1',
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞
from django.core.cache import cache

def get_tickets_list():
    cache_key = 'tickets_list'
    tickets = cache.get(cache_key)
    
    if tickets is None:
        tickets = list(Ticket.objects.all())
        cache.set(cache_key, tickets, 300)  # 5 –º–∏–Ω—É—Ç
    
    return tickets
```

#### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ React
```typescript
// React Query –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
import { useQuery } from 'react-query';

const useTickets = () => {
  return useQuery('tickets', fetchTickets, {
    staleTime: 5 * 60 * 1000, // 5 –º–∏–Ω—É—Ç
    cacheTime: 10 * 60 * 1000, // 10 –º–∏–Ω—É—Ç
  });
};
```

### 3. Lazy Loading

#### Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```typescript
// Lazy loading –≤ React
import { lazy, Suspense } from 'react';

const TicketDetails = lazy(() => import('./TicketDetails'));

const App = () => {
  return (
    <Suspense fallback={<div>Loading...</div>}>
      <TicketDetails />
    </Suspense>
  );
};
```

#### –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤
```typescript
// –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
import { FixedSizeList as List } from 'react-window';

const TicketList = ({ tickets }) => {
  const Row = ({ index, style }) => (
    <div style={style}>
      <TicketItem ticket={tickets[index]} />
    </div>
  );

  return (
    <List
      height={600}
      itemCount={tickets.length}
      itemSize={100}
    >
      {Row}
    </List>
  );
};
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### Python –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
import logging
import json
from datetime import datetime

class JSONFormatter(logging.Formatter):
    def format(self, record):
        log_entry = {
            'timestamp': datetime.utcnow().isoformat(),
            'level': record.levelname,
            'logger': record.name,
            'message': record.getMessage(),
            'module': record.module,
            'function': record.funcName,
            'line': record.lineno,
        }
        
        if hasattr(record, 'user_id'):
            log_entry['user_id'] = record.user_id
        
        if hasattr(record, 'request_id'):
            log_entry['request_id'] = record.request_id
        
        return json.dumps(log_entry)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞
logger = logging.getLogger(__name__)
handler = logging.StreamHandler()
handler.setFormatter(JSONFormatter())
logger.addHandler(handler)
logger.setLevel(logging.INFO)
```

#### JavaScript –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```typescript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ React
import { createLogger } from 'redux-logger';

const logger = createLogger({
  collapsed: true,
  diff: true,
  duration: true,
  timestamp: true,
  logErrors: true,
});

// –ö–∞—Å—Ç–æ–º–Ω—ã–π –ª–æ–≥–≥–µ—Ä
class Logger {
  static info(message: string, data?: any) {
    console.log(JSON.stringify({
      level: 'INFO',
      message,
      data,
      timestamp: new Date().toISOString(),
    }));
  }
  
  static error(message: string, error?: Error) {
    console.error(JSON.stringify({
      level: 'ERROR',
      message,
      error: error?.stack,
      timestamp: new Date().toISOString(),
    }));
  }
}
```

### 2. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### Prometheus –º–µ—Ç—Ä–∏–∫–∏
```python
# Django –º–µ—Ç—Ä–∏–∫–∏
from prometheus_client import Counter, Histogram, Gauge
import time

# –°—á–µ—Ç—á–∏–∫–∏
ticket_created_total = Counter('ticket_created_total', 'Total tickets created')
ticket_resolved_total = Counter('ticket_resolved_total', 'Total tickets resolved')

# –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã
request_duration = Histogram('request_duration_seconds', 'Request duration')

# Gauges
active_users = Gauge('active_users', 'Number of active users')

# Middleware –¥–ª—è –º–µ—Ç—Ä–∏–∫
class MetricsMiddleware:
    def __init__(self, get_response):
        self.get_response = get_response

    def __call__(self, request):
        start_time = time.time()
        
        response = self.get_response(request)
        
        duration = time.time() - start_time
        request_duration.observe(duration)
        
        return response
```

#### Health checks
```python
# Health check endpoint
from django.http import JsonResponse
from django.db import connection
from django.core.cache import cache

def health_check(request):
    health_status = {
        'status': 'healthy',
        'timestamp': timezone.now().isoformat(),
        'checks': {}
    }
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    try:
        with connection.cursor() as cursor:
            cursor.execute("SELECT 1")
        health_status['checks']['database'] = 'healthy'
    except Exception as e:
        health_status['checks']['database'] = f'unhealthy: {str(e)}'
        health_status['status'] = 'unhealthy'
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞
    try:
        cache.set('health_check', 'ok', 10)
        cache.get('health_check')
        health_status['checks']['cache'] = 'healthy'
    except Exception as e:
        health_status['checks']['cache'] = f'unhealthy: {str(e)}'
        health_status['status'] = 'unhealthy'
    
    return JsonResponse(health_status)
```

## DevOps –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. Infrastructure as Code

#### Terraform
```hcl
# main.tf
provider "aws" {
  region = "us-west-2"
}

resource "aws_instance" "app_server" {
  ami           = "ami-0c55b159cbfafe1d0"
  instance_type = "t3.medium"
  
  tags = {
    Name = "workernet-app-server"
    Environment = "production"
  }
}

resource "aws_db_instance" "postgres" {
  identifier = "workernet-db"
  engine     = "postgres"
  engine_version = "15.3"
  instance_class = "db.t3.micro"
  allocated_storage = 20
  
  db_name  = "workernet"
  username = "workernet"
  password = var.db_password
  
  vpc_security_group_ids = [aws_security_group.db.id]
  
  tags = {
    Name = "workernet-database"
  }
}
```

#### Ansible
```yaml
# playbook.yml
- hosts: app_servers
  become: yes
  vars:
    app_user: workernet
    app_dir: /opt/workernet
    
  tasks:
    - name: Update system packages
      apt:
        update_cache: yes
        upgrade: yes
        
    - name: Install required packages
      apt:
        name:
          - python3.11
          - python3.11-venv
          - postgresql
          - redis-server
          - nginx
        state: present
        
    - name: Create application user
      user:
        name: "{{ app_user }}"
        system: yes
        shell: /bin/bash
        
    - name: Create application directory
      file:
        path: "{{ app_dir }}"
        state: directory
        owner: "{{ app_user }}"
        group: "{{ app_user }}"
        mode: '0755'
        
    - name: Deploy application
      git:
        repo: https://github.com/apelsin349/portal-support-ERP-WorkerNet.git
        dest: "{{ app_dir }}"
        version: main
        
    - name: Install Python dependencies
      pip:
        requirements: "{{ app_dir }}/backend/requirements.txt"
        virtualenv: "{{ app_dir }}/backend/venv"
        
    - name: Install Node.js dependencies
      npm:
        path: "{{ app_dir }}/frontend"
        state: present
        
    - name: Configure Nginx
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/sites-available/workernet
      notify: restart nginx
      
    - name: Enable Nginx site
      file:
        src: /etc/nginx/sites-available/workernet
        dest: /etc/nginx/sites-enabled/workernet
        state: link
      notify: restart nginx
      
  handlers:
    - name: restart nginx
      service:
        name: nginx
        state: restarted
```

### 2. Containerization

#### Multi-stage Docker builds
```dockerfile
# Backend Dockerfile
FROM python:3.11-slim as builder

WORKDIR /app
COPY backend/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

FROM python:3.11-slim as production

WORKDIR /app
COPY --from=builder /usr/local/lib/python3.11/site-packages /usr/local/lib/python3.11/site-packages
COPY --from=builder /usr/local/bin /usr/local/bin

COPY backend/ .
RUN python manage.py collectstatic --noinput

EXPOSE 8000
CMD ["gunicorn", "config.wsgi:application", "--bind", "0.0.0.0:8000"]
```

```dockerfile
# Frontend Dockerfile
FROM node:18-alpine as builder

WORKDIR /app
COPY frontend/package*.json ./
RUN npm ci --only=production

COPY frontend/ .
RUN npm run build

FROM nginx:alpine as production
COPY --from=builder /app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 3. Kubernetes

#### Deployment
```yaml
# k8s/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: workernet-backend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: workernet-backend
  template:
    metadata:
      labels:
        app: workernet-backend
    spec:
      containers:
      - name: backend
        image: workernet/backend:latest
        ports:
        - containerPort: 8000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: workernet-secrets
              key: database-url
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              name: workernet-secrets
              key: redis-url
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health/
            port: 8000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health/
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 5
```

#### Service
```yaml
# k8s/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: workernet-backend-service
spec:
  selector:
    app: workernet-backend
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8000
  type: ClusterIP
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ WorkerNet Portal –≤–∫–ª—é—á–∞—é—Ç:

- ‚úÖ **Clean Architecture**: –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤
- ‚úÖ **DDD**: –î–æ–º–µ–Ω–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ **CQRS**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **Code Quality**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫
- ‚úÖ **Testing**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚úÖ **Security**: –ó–∞—â–∏—Ç–∞ –æ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **Performance**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **Monitoring**: –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ **DevOps**: Infrastructure as Code

–≠—Ç–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
