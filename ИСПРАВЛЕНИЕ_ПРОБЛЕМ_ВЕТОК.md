# Исправление проблем с ветками Git

## Проблема
При использовании скрипта `quick-update.sh` возникает ошибка:
```
[ОШИБКА] Ветка '  new-frontend' не найдена на удаленном репозитории
```

## Причина
Проблема связана с лишними пробелами в названиях веток, которые могут появляться при обработке вывода команд Git.

## Решение

### 1. Автоматическое исправление
Исправления уже внесены в скрипт `scripts/quick-update.sh`. Основные изменения:

- Добавлена очистка лишних пробелов во всех местах обработки названий веток
- Добавлена проверка на пустые названия веток
- Улучшена обработка пользовательского ввода
- Добавлена фильтрация пустых строк

### 2. Ручное исправление
Если проблема повторяется, выполните следующие команды:

```bash
# Перейдите в директорию проекта
cd ~/portal-support-ERP-WorkerNet

# Обновите удаленные ссылки
git fetch --all --prune

# Проверьте текущую ветку
git branch --show-current

# Переключитесь на нужную ветку
git checkout new-frontend

# Проверьте статус
git status
```

### 3. Диагностика проблем
Используйте новый скрипт для диагностики:

```bash
# Полная диагностика
bash scripts/fix-branch-issues.sh

# Только диагностика
bash scripts/fix-branch-issues.sh --diagnose

# Только исправление
bash scripts/fix-branch-issues.sh --fix

# Только тестирование
bash scripts/fix-branch-issues.sh --test
```

## Предотвращение проблем

### 1. Правильный ввод названий веток
При выборе ветки в интерактивном режиме:
- Вводите точное название без лишних пробелов
- Используйте номера из списка для избежания ошибок ввода

### 2. Использование переменных окружения
```bash
# Установите ветку через переменную окружения
export WORKERNET_BRANCH=new-frontend
bash scripts/quick-update.sh
```

### 3. Использование аргументов командной строки
```bash
# Укажите ветку через аргумент
bash scripts/quick-update.sh --branch new-frontend
```

## Проверка исправления

После применения исправлений проверьте:

1. **Список веток без лишних пробелов:**
   ```bash
   git branch -r | grep -v HEAD | sed 's/origin\///' | sed 's/^[[:space:]]*//' | sed 's/[[:space:]]*$//' | grep -v '^[[:space:]]*$' | sort -u
   ```

2. **Переключение на ветку:**
   ```bash
   git checkout new-frontend
   ```

3. **Запуск скрипта обновления:**
   ```bash
   bash scripts/quick-update.sh --branch new-frontend
   ```

## Дополнительные команды

### Очистка Git кэша
```bash
git gc --prune=now
git remote prune origin
```

### Проверка состояния репозитория
```bash
git status
git log --oneline -5
git branch -a
```

### Сброс к удаленной ветке
```bash
git fetch origin
git reset --hard origin/new-frontend
```

## Контакты
При возникновении проблем обращайтесь к документации проекта или создавайте issue в репозитории.
