# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ `scripts/install-ubuntu.sh` –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫**

**–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
main() {
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
    check_existing_installation
    
    # –†–∞–Ω–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –µ—Å–ª–∏ —É–∂–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
    early_update_repository  # ‚ùå –í—ã–ø–æ–ª–Ω—è–ª–æ—Å—å –î–û –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞!
    
    # –í—ã–ø–æ–ª–Ω—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    if [ "$INSTALLATION_MODE" = "update" ]; then
        update_installation
    else
        fresh_installation
        # ... –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
    fi
}
```

**–ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```bash
main() {
    # –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–ü–ï–†–í–´–ú –î–ï–õ–û–ú!)
    # 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (update/fresh)
    # 3. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
    # 4. –í —Ä–µ–∂–∏–º–µ update: early_update_repository + update_installation
    # 5. –í —Ä–µ–∂–∏–º–µ fresh: –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –Ω—É–ª—è
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É
    check_existing_installation
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
    if [ -z "$INSTALLATION_MODE" ]; then
        print_error "–†–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω"
        exit 1
    fi
    
    print_status "–í—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏: $INSTALLATION_MODE"
    
    # –í—ã–ø–æ–ª–Ω—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    if [ "$INSTALLATION_MODE" = "update" ]; then
        # –†–µ–∂–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        # –†–∞–Ω–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –µ—Å–ª–∏ —É–∂–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω
        early_update_repository  # ‚úÖ –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è!
        update_installation
    else
        # –†–µ–∂–∏–º –Ω–æ–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        fresh_installation
        # ... –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
    fi
}
```

### 2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```bash
# Installation mode (will be set by check_existing_installation)
INSTALLATION_MODE=""
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–µ–∂–∏–º–∞**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
if [ -z "$INSTALLATION_MODE" ]; then
    print_error "–†–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω"
    exit 1
fi

print_status "–í—ã–±—Ä–∞–Ω —Ä–µ–∂–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫–∏: $INSTALLATION_MODE"
```

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
check_existing_installation() {
    print_status "–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É WorkerNet Portal..."
    print_status "–≠—Ç–æ—Ç —à–∞–≥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–ï–†–í–´–ú –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏"
    # ...
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏** (`check_existing_installation`)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ systemd
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

2. **–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏**
   - `update` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   - `fresh` - –Ω–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –Ω—É–ª—è

3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞**
   - **–†–µ–∂–∏–º `update`**: `early_update_repository` ‚Üí `update_installation`
   - **–†–µ–∂–∏–º `fresh`**: –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å –Ω—É–ª—è

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ü–ï–†–í–û–ô** - –¥–æ –ª—é–±—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
- ‚úÖ **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **–ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏** —Ä–µ–∂–∏–º–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –ø–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ **–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `scripts/test-installation-check.sh` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

- ‚úÖ –ü–æ—Ä—è–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ –õ–æ–≥–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
./scripts/install-ubuntu.sh
# ‚Üí check_existing_installation (–Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
# ‚Üí INSTALLATION_MODE="fresh"
# ‚Üí fresh_installation + –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã**
```bash
./scripts/install-ubuntu.sh
# ‚Üí check_existing_installation (–Ω–∞–π–¥–µ–Ω–æ, —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã)
# ‚Üí –í—ã–±–æ—Ä: "–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É"
# ‚Üí INSTALLATION_MODE="update"
# ‚Üí early_update_repository + update_installation
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–≤–µ—Ä—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π**
```bash
./scripts/install-ubuntu.sh
# ‚Üí check_existing_installation (–Ω–∞–π–¥–µ–Ω–æ)
# ‚Üí –í—ã–±–æ—Ä: "–í—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–æ–≤—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É"
# ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: "y"
# ‚Üí INSTALLATION_MODE="fresh"
# ‚Üí fresh_installation + –ø–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```

### **–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º**
```bash
export WORKERNET_AUTO_UPDATE=1
./scripts/install-ubuntu.sh
# ‚Üí check_existing_installation (–Ω–∞–π–¥–µ–Ω–æ)
# ‚Üí –ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "update"
# ‚Üí INSTALLATION_MODE="update"
# ‚Üí early_update_repository + update_installation
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–ü–ï–†–í–´–ú –î–ï–õ–û–ú** –≤ —Å–∫—Ä–∏–ø—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞** —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ **–ß–∏—Å—Ç—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É** –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞

–°–∫—Ä–∏–ø—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ! üöÄ
