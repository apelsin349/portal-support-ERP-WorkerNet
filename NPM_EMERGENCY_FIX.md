# ðŸš¨ Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ npm Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

## ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: npm Ð·Ð°Ð²Ð¸ÑÐ°ÐµÑ‚ Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ð¼Ð¸ integrity

### Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼Ñ‹
```
npm error code EINTEGRITY
npm error sha512-xxx integrity checksum failed
npm warn tarball tarball data for nodemon@xxx seems to be corrupted
```

### ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹
1. **ÐŸÐ¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ð½Ñ‹Ð¹ ÐºÑÑˆ npm** - Ñ„Ð°Ð¹Ð»Ñ‹ Ð² ÐºÑÑˆÐµ Ð¿Ð¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ñ‹
2. **ÐÐµÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¹ package-lock.json** - lock Ñ„Ð°Ð¹Ð» Ð½Ðµ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ package.json
3. **Ð¡ÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹** - Ð¿Ñ€ÐµÑ€Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð¾Ð²Ñ€ÐµÐ´Ð¸Ð»Ð¸ Ñ„Ð°Ð¹Ð»Ñ‹

## ðŸš€ Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ñ

### 1. Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚:

```bash
# Ð¡Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¼
chmod +x scripts/emergency-npm-reset.sh

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ±Ñ€Ð¾Ñ
./scripts/emergency-npm-reset.sh
```

### 2. ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

Ð•ÑÐ»Ð¸ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð½Ðµ Ð¿Ð¾Ð¼Ð¾Ð³:

```bash
# Ð¡Ð´ÐµÐ»Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸ÑÐ¿Ð¾Ð»Ð½ÑÐµÐ¼Ñ‹Ð¼
chmod +x scripts/force-fix-npm.sh

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
./scripts/force-fix-npm.sh
```

### 3. Ð ÑƒÑ‡Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ

#### Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ°
```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ npm
pkill -f npm >/dev/null 2>&1 || true

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð’Ð¡Ð• ÐºÑÑˆÐ¸ npm
npm cache clean --force
rm -rf ~/.npm
rm -rf /tmp/npm-*
rm -rf /tmp/.npm
rm -rf ~/.npm/_cacache
rm -rf ~/.npm/_logs

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÐµ lock Ñ„Ð°Ð¹Ð»Ñ‹
find . -name "package-lock.json" -delete
find . -name "yarn.lock" -delete
find . -name "pnpm-lock.yaml" -delete

# Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÐµ node_modules
find . -name "node_modules" -type d -exec rm -rf {} +
```

#### Ð¨Ð°Ð³ 2: Ð¡Ð±Ñ€Ð¾Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ npm
```bash
# Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÐµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ npm
npm config delete registry
npm config delete proxy
npm config delete https-proxy
npm config delete strict-ssl
npm config delete cafile

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ npm Ð·Ð°Ð½Ð¾Ð²Ð¾
npm config set registry https://registry.npmjs.org/
npm config set strict-ssl true
npm config set fetch-retry-mintimeout 20000
npm config set fetch-retry-maxtimeout 120000
npm config set fetch-retries 3
```

#### Ð¨Ð°Ð³ 3: ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
```bash
# ÐŸÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð² ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³ frontend
cd frontend

# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ package.json
cat > package.json << 'EOF'
{
  "name": "portal-support-frontend",
  "version": "1.0.0",
  "dependencies": {
    "express": "4.18.2"
  },
  "devDependencies": {
    "nodemon": "3.0.1"
  }
}
EOF

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð±ÐµÐ· lock Ñ„Ð°Ð¹Ð»Ð°
npm install --no-package-lock --no-audit --no-fund
```

## ðŸ”§ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ñ‹

### 1. Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ±Ñ€Ð¾Ñ (`scripts/emergency-npm-reset.sh`)
- ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ ÑƒÐ´Ð°Ð»ÑÐµÑ‚ Ð²ÑÐµ ÐºÑÑˆÐ¸ npm
- Ð£Ð´Ð°Ð»ÑÐµÑ‚ Ð²ÑÐµ lock Ñ„Ð°Ð¹Ð»Ñ‹
- Ð£Ð´Ð°Ð»ÑÐµÑ‚ Ð²ÑÐµ node_modules
- Ð¡Ð±Ñ€Ð°ÑÑ‹Ð²Ð°ÐµÑ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ npm
- Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ

### 2. ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ (`scripts/force-fix-npm.sh`)
- ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° ÐºÑÑˆÐ°
- ÐœÐ½Ð¾Ð¶ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ðµ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
- Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð¸Ðµ package.json
- Fallback Ð½Ð° Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½ÑƒÑŽ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ

### 3. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸ ÐºÑÑˆÐ°
- ÐÐ³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° Ð¿Ñ€Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°Ñ…
- 4 ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸:
  1. npm install Ð±ÐµÐ· lock Ñ„Ð°Ð¹Ð»Ð°
  2. npm install Ñ Ð¿Ñ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸ÐµÐ¼
  3. npm ci (ÐµÑÐ»Ð¸ lock Ñ„Ð°Ð¹Ð» ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½)
  4. ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±ÐµÐ· lock Ñ„Ð°Ð¹Ð»Ð°

## ðŸ“‹ Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

### Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ 1: Ð‘ÐµÐ· lock Ñ„Ð°Ð¹Ð»Ð°
```bash
npm install --omit=optional --no-audit --no-fund
```

### Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ 2: ÐŸÑ€Ð¸Ð½ÑƒÐ´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
```bash
npm install --omit=optional --no-audit --no-fund --force
```

### Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ 3: Clean install
```bash
npm ci --omit=optional --no-audit --no-fund
```

### Ð¡Ñ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ñ 4: ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
```bash
npm install --omit=optional --no-audit --no-fund --no-package-lock
```

## âš ï¸ ÐŸÑ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ

### Ð­ÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ±Ñ€Ð¾Ñ ÑƒÐ´Ð°Ð»Ð¸Ñ‚:
- âœ… Ð’ÑÐµ ÐºÑÑˆÐ¸ npm
- âœ… Ð’ÑÐµ lock Ñ„Ð°Ð¹Ð»Ñ‹
- âœ… Ð’ÑÐµ node_modules
- âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ npm

### ÐŸÐ¾ÑÐ»Ðµ ÑÐ±Ñ€Ð¾ÑÐ°:
- npm Ð±ÑƒÐ´ÐµÑ‚ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ð°ÐºÐµÑ‚Ñ‹ Ð·Ð°Ð½Ð¾Ð²Ð¾
- Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¼Ð¾Ð¶ÐµÑ‚ Ð·Ð°Ð½ÑÑ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
- ÐÑƒÐ¶Ð½Ð¾ Ð±ÑƒÐ´ÐµÑ‚ Ð¿ÐµÑ€ÐµÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

## ðŸŽ¯ Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### Ð”Ð»Ñ Ð¿Ñ€ÐµÐ´Ð¾Ñ‚Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼:
1. **Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¾Ñ‡Ð¸Ñ‰Ð°Ð¹Ñ‚Ðµ ÐºÑÑˆ**: `npm cache clean --force`
2. **ÐÐµ Ð¿Ñ€ÐµÑ€Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ**: Ð´Ð¾Ð¶Ð´Ð¸Ñ‚ÐµÑÑŒ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ
3. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸**: Ð¸Ð·Ð±ÐµÐ³Ð°Ð¹Ñ‚Ðµ `^` Ð¸ `~` Ð² package.json
4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ ÑÐµÑ‚ÑŒ**: ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ð² ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¸

### Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÑŽÑ‚ÑÑ:
1. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Node.js Ð´Ð¾ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ LTS Ð²ÐµÑ€ÑÐ¸Ð¸
2. ÐŸÐµÑ€ÐµÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ npm: `npm install -g npm@latest`
3. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð¿Ð°ÐºÐµÑ‚Ð½Ñ‹Ðµ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ñ‹ (yarn, pnpm)

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ Ð¿Ð¾ÑÐ»Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

```bash
# 1. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ±Ñ€Ð¾Ñ
./scripts/emergency-npm-reset.sh

# 2. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Ð·Ð°Ð½Ð¾Ð²Ð¾
./scripts/install-ubuntu.sh

# 3. Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð°ÑŽÑ‚ÑÑ, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ð¾Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ
./scripts/force-fix-npm.sh
```

## ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°

Ð•ÑÐ»Ð¸ Ð½Ð¸ Ð¾Ð´Ð½Ð¾ Ð¸Ð· Ñ€ÐµÑˆÐµÐ½Ð¸Ð¹ Ð½Ðµ Ð¿Ð¾Ð¼Ð¾Ð³Ð»Ð¾:
1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÐµÑ€ÑÐ¸ÑŽ Node.js: `node --version`
2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÐµÑ€ÑÐ¸ÑŽ npm: `npm --version`
3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ‚ÐµÐ²Ð¾Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ: `ping registry.npmjs.org`
4. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ñ€ÐµÐµÑÑ‚Ñ€: `npm config set registry https://registry.npmmirror.com/`
