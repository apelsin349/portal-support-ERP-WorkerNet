"use strict";(self.webpackChunkportal_support_frontend=self.webpackChunkportal_support_frontend||[]).push([[421],{4421:(e,r,n)=>{n.r(r),n.d(r,{default:()=>pe});var t=n(4848),i=n(6540),o=n(7767),s=n(4675),a=n(7708),l=n(9067),c=n(9828),d=n(8532),x=n(1641),h=n(4073),p=n(781),u=n(1385),A=n(9741),j=n(3896),m=n(4654),g=n(4137),y=n(5764),b=n(8170),v=n(8732),f=n(4195),k=n(1543),C=n(9799),w=n(4090),z=n(7211),S=n(7873),D=n(2241),P=n(8620),I=n(1117),R=n(5021),M=n(3745),T=n(9634),W=n(5554);const B=[{path:"/dashboard",icon:I.A,label:"navigation.dashboard"},{path:"/tickets",icon:R.A,label:"navigation.tickets"},{path:"/knowledge",icon:M.A,label:"navigation.knowledge"},{path:"/users",icon:T.A,label:"navigation.users"},{path:"/settings",icon:y.A,label:"navigation.settings"}],E=({open:e,onClose:r})=>{const{t:n}=(0,f.Bd)(),i=(0,o.Zp)(),c=(0,o.zy)(),d=(0,s.A)(),x=(0,a.A)(d.breakpoints.down("md")),p=(0,t.jsxs)(l.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,t.jsx)(l.A,{sx:{p:3,textAlign:"center"},children:(0,t.jsxs)(v.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,t.jsx)(W.A,{sx:{fontSize:40,color:"primary.main",mb:1}}),(0,t.jsx)(h.A,{variant:"h6",sx:{fontWeight:600,color:"text.primary"},children:"WorkerNet"}),(0,t.jsx)(h.A,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.75rem"},children:"Система поддержки"})]})}),(0,t.jsx)(k.A,{}),(0,t.jsx)(C.A,{sx:{flexGrow:1,pt:2},children:B.map((e,o)=>{const s=c.pathname===e.path,a=e.icon;return(0,t.jsx)(v.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*o},children:(0,t.jsx)(w.Ay,{disablePadding:!0,sx:{px:2,mb:.5},children:(0,t.jsxs)(z.A,{onClick:()=>{return n=e.path,i(n),void(x&&r());var n},selected:s,sx:{borderRadius:2,mb:.5,"&.Mui-selected":{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"},"& .MuiListItemIcon-root":{color:"primary.contrastText"}},"&:hover":{backgroundColor:"action.hover"}},children:[(0,t.jsx)(S.A,{children:(0,t.jsx)(a,{})}),(0,t.jsx)(D.A,{primary:n(e.label),primaryTypographyProps:{fontSize:"0.875rem",fontWeight:s?600:400}})]})})},e.path)})}),(0,t.jsx)(k.A,{}),(0,t.jsx)(l.A,{sx:{p:2,textAlign:"center"},children:(0,t.jsx)(h.A,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.75rem"},children:"v1.0.0"})})]});return(0,t.jsx)(P.Ay,{variant:x?"temporary":"persistent",open:e,onClose:r,sx:{width:280,flexShrink:0,"& .MuiDrawer-paper":{width:280,boxSizing:"border-box",backgroundColor:"background.paper",borderRight:1,borderColor:"divider"}},children:p})};var H=n(362),G=n(6990),F=n(1224),N=n(6566),_=n(6512);const L=({variant:e="button",showBadge:r=!0})=>{const{canInstall:n,isInstalled:o,installApp:s}=(0,_.u)(),[a,l]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(n&&!o){l(!0);const e=setTimeout(()=>l(!1),5e3);return()=>clearTimeout(e)}},[n,o]),o||!n)return null;const c=()=>{s()};return"icon"===e?(0,t.jsx)(H.A,{title:"Установить приложение",open:a,placement:"bottom",children:(0,t.jsx)(p.A,{color:"primary",variant:"dot",invisible:!r,children:(0,t.jsx)(x.A,{onClick:c,color:"primary",size:"large",component:v.P.div,whileHover:{scale:1.1},whileTap:{scale:.95},children:(0,t.jsx)(F.A,{})})})}):(0,t.jsx)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,t.jsx)(G.A,{variant:"contained",startIcon:(0,t.jsx)(N.A,{}),onClick:c,sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:3,py:1},component:v.P.div,whileHover:{scale:1.02},whileTap:{scale:.98},children:"Установить приложение"})})};var O=n(7414),$=n(6379),K=n(5222),U=n(1414),Z=n(6844);const q=({variant:e="icon",showAuto:r=!1})=>{const{isDarkMode:n,toggleTheme:i}=(0,Z.D)();return"switch"===e?(0,t.jsx)(O.A,{control:(0,t.jsx)($.A,{checked:n,onChange:i,color:"primary"}),label:(0,t.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[n?(0,t.jsx)(K.A,{}):(0,t.jsx)(U.A,{}),n?"Темная":"Светлая"]})}):"button"===e?(0,t.jsx)(v.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(H.A,{title:n?"Светлая тема":"Темная тема",children:(0,t.jsx)(x.A,{onClick:i,color:"inherit",sx:{p:1.5,borderRadius:2,backgroundColor:"action.hover","&:hover":{backgroundColor:"action.selected"}},children:(0,t.jsx)(v.P.div,{animate:{rotate:n?180:0},transition:{duration:.3},children:n?(0,t.jsx)(U.A,{}):(0,t.jsx)(K.A,{})})})})}):(0,t.jsx)(H.A,{title:n?"Светлая тема":"Темная тема",children:(0,t.jsx)(x.A,{onClick:i,color:"inherit",size:"large",children:(0,t.jsx)(v.P.div,{animate:{rotate:n?180:0},transition:{duration:.3},children:n?(0,t.jsx)(U.A,{}):(0,t.jsx)(K.A,{})})})})};var J=n(8418),Q=n(5239),V=n(3357),X=n(538),Y=n(2022),ee=n(8125),re=n(6336),ne=n(7809),te=n(1365),ie=n(8691);const oe=({placeholder:e="Поиск...",onSearch:r,onResultClick:n,recentSearches:o=[],onClearRecent:s,loading:a=!1,results:c=[],showSuggestions:d=!0,maxResults:p=10})=>{const{t:u}=(0,f.Bd)(),[A,j]=(0,i.useState)(""),[m,g]=(0,i.useState)(!1),[y,b]=(0,i.useState)(-1),z=(0,i.useRef)(null),P=(0,i.useRef)(null),I=e=>{n?.(e),g(!1),j(""),z.current?.blur()},R=e=>{j(e),r?.(e),g(!1),z.current?.blur()},M=e=>{switch(e){case"ticket":return"🎫";case"knowledge":return"📚";case"user":return"👤";case"setting":return"⚙️";default:return"🔍"}},T=e=>{switch(e){case"urgent":return"error";case"high":return"warning";case"medium":return"info";default:return"default"}};return(0,i.useEffect)(()=>{const e=e=>{P.current&&!P.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,t.jsxs)(l.A,{sx:{position:"relative",width:"100%"},ref:P,children:[(0,t.jsx)(J.A,{ref:z,fullWidth:!0,value:A,onChange:e=>{const n=e.target.value;j(n),b(-1),n.length>0?(g(!0),r?.(n)):g(!1)},onKeyDown:e=>{if(!m)return;const r=Math.min(c.length,p)+o.length;switch(e.key){case"ArrowDown":e.preventDefault(),b(e=>(e+1)%r);break;case"ArrowUp":e.preventDefault(),b(e=>(e-1+r)%r);break;case"Enter":if(e.preventDefault(),y>=0&&y<c.length)I(c[y]);else if(y>=c.length){const e=y-c.length;R(o[e])}break;case"Escape":g(!1),z.current?.blur()}},onFocus:()=>A.length>0&&g(!0),placeholder:e,InputProps:{startAdornment:(0,t.jsx)(Q.A,{position:"start",children:a?(0,t.jsx)(V.A,{size:20}):(0,t.jsx)(ee.A,{color:"action"})}),endAdornment:A&&(0,t.jsx)(Q.A,{position:"end",children:(0,t.jsx)(x.A,{onClick:()=>{j(""),g(!1),z.current?.focus()},size:"small",children:(0,t.jsx)(re.A,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,backgroundColor:"background.paper"}}}),(0,t.jsx)(ie.N,{children:m&&(0,t.jsx)(v.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(0,t.jsxs)(X.A,{sx:{position:"absolute",top:"100%",left:0,right:0,mt:1,maxHeight:400,overflow:"auto",zIndex:1e3,boxShadow:3},children:[c.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{sx:{p:2,pb:1},children:(0,t.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Результаты поиска"})}),(0,t.jsx)(C.A,{sx:{p:0},children:c.slice(0,p).map((e,r)=>(0,t.jsx)(v.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*r},children:(0,t.jsxs)(w.Ay,{button:!0,onClick:()=>I(e),sx:{backgroundColor:y===r?"action.hover":"transparent","&:hover":{backgroundColor:"action.hover"}},children:[(0,t.jsx)(S.A,{children:(0,t.jsx)(h.A,{sx:{fontSize:"1.2rem"},children:M(e.type)})}),(0,t.jsx)(D.A,{primary:(0,t.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,t.jsx)(h.A,{variant:"subtitle2",sx:{fontWeight:600},children:e.title}),e.priority&&(0,t.jsx)(Y.A,{label:e.priority,size:"small",color:T(e.priority),sx:{fontSize:"0.75rem"}})]}),secondary:(0,t.jsxs)(l.A,{children:[(0,t.jsx)(h.A,{variant:"body2",color:"text.secondary",children:e.description}),e.category&&(0,t.jsx)(Y.A,{label:e.category,size:"small",variant:"outlined",sx:{mt:.5,fontSize:"0.75rem"}})]})})]})},e.id))})]}),o.length>0&&0===A.length&&(0,t.jsxs)(t.Fragment,{children:[c.length>0&&(0,t.jsx)(k.A,{}),(0,t.jsx)(l.A,{sx:{p:2,pb:1},children:(0,t.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)(h.A,{variant:"subtitle2",color:"text.secondary",children:"Недавние поиски"}),(0,t.jsx)(x.A,{size:"small",onClick:s,children:(0,t.jsx)(ne.A,{fontSize:"small"})})]})}),(0,t.jsx)(C.A,{sx:{p:0},children:o.map((e,r)=>(0,t.jsx)(v.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*r},children:(0,t.jsxs)(w.Ay,{button:!0,onClick:()=>R(e),sx:{backgroundColor:y===c.length+r?"action.hover":"transparent","&:hover":{backgroundColor:"action.hover"}},children:[(0,t.jsx)(S.A,{children:(0,t.jsx)(te.A,{color:"action"})}),(0,t.jsx)(D.A,{primary:e,primaryTypographyProps:{variant:"body2",color:"text.secondary"}})]})},e))})]}),0===c.length&&0===o.length&&A.length>0&&(0,t.jsxs)(l.A,{sx:{p:3,textAlign:"center"},children:[(0,t.jsx)(ee.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,t.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Ничего не найдено"})]})]})})})]})};var se=n(1471),ae=n(6255),le=n(9362),ce=n(7110),de=n(8409),xe=n(715);const he=({open:e,onClose:r,notifications:n=[],onMarkAsRead:o,onDelete:s,onMarkAllAsRead:a,onClearAll:c})=>{const{t:d}=(0,f.Bd)(),[m,y]=(0,i.useState)(null),b=n.filter(e=>!e.read).length,z=e=>{switch(e){case"success":return"✅";case"warning":return"⚠️";case"error":return"❌";default:return"ℹ️"}},S=e=>{switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"primary"}},I=()=>{y(null)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(P.Ay,{anchor:"right",open:e,onClose:r,sx:{"& .MuiDrawer-paper":{width:400,maxWidth:"90vw"}},children:(0,t.jsxs)(l.A,{sx:{p:2},children:[(0,t.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,t.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,t.jsx)(p.A,{badgeContent:b,color:"error",children:(0,t.jsx)(g.A,{})}),(0,t.jsx)(h.A,{variant:"h6",sx:{fontWeight:600},children:"Уведомления"})]}),(0,t.jsxs)(l.A,{children:[(0,t.jsx)(x.A,{onClick:e=>{y(e.currentTarget)},size:"small",children:(0,t.jsx)(ae.A,{})}),(0,t.jsx)(x.A,{onClick:r,size:"small",children:(0,t.jsx)(ne.A,{})})]})]}),(0,t.jsxs)(A.A,{anchorEl:m,open:Boolean(m),onClose:I,children:[(0,t.jsxs)(j.A,{onClick:()=>{a?.(),I()},children:[(0,t.jsx)(le.A,{sx:{mr:1}}),"Отметить все как прочитанные"]}),(0,t.jsxs)(j.A,{onClick:()=>{c?.(),I()},children:[(0,t.jsx)(ce.A,{sx:{mr:1}}),"Очистить все"]})]}),(0,t.jsx)(k.A,{sx:{mb:2}}),0===n.length?(0,t.jsxs)(l.A,{sx:{textAlign:"center",py:4},children:[(0,t.jsx)(g.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,t.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Нет уведомлений"})]}):(0,t.jsx)(C.A,{sx:{p:0},children:(0,t.jsx)(ie.N,{children:n.map((e,r)=>(0,t.jsx)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*r},children:(0,t.jsxs)(w.Ay,{sx:{p:2,mb:1,borderRadius:2,backgroundColor:e.read?"transparent":"action.hover",border:1,borderColor:"divider","&:hover":{backgroundColor:"action.selected"}},children:[(0,t.jsx)(se.A,{children:(0,t.jsx)(u.A,{sx:{backgroundColor:`${S(e.type)}.light`,color:`${S(e.type)}.main`},children:z(e.type)})}),(0,t.jsx)(D.A,{primary:(0,t.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,t.jsx)(h.A,{variant:"subtitle2",sx:{fontWeight:e.read?400:600,color:e.read?"text.secondary":"text.primary"},children:e.title}),(0,t.jsx)(Y.A,{label:(0,de.A)(e.timestamp,{addSuffix:!0,locale:xe.A}),size:"small",variant:"outlined",sx:{fontSize:"0.75rem"}})]}),secondary:(0,t.jsxs)(l.A,{children:[(0,t.jsx)(h.A,{variant:"body2",sx:{color:e.read?"text.secondary":"text.primary",mb:1},children:e.message}),e.action&&(0,t.jsx)(G.A,{size:"small",variant:"outlined",onClick:e.action.onClick,sx:{mr:1},children:e.action.label}),(0,t.jsxs)(l.A,{sx:{display:"flex",gap:1,mt:1},children:[!e.read&&(0,t.jsx)(G.A,{size:"small",startIcon:(0,t.jsx)(le.A,{}),onClick:()=>o?.(e.id),children:"Прочитано"}),(0,t.jsx)(G.A,{size:"small",color:"error",startIcon:(0,t.jsx)(ce.A,{}),onClick:()=>s?.(e.id),children:"Удалить"})]})]})})]})},e.id))})})]})})})},pe=()=>{const{t:e}=(0,f.Bd)(),r=(0,s.A)(),n=(0,a.A)(r.breakpoints.down("md")),{canInstall:k}=(0,_.u)(),[C,w]=(0,i.useState)(!n),[z,S]=(0,i.useState)(null),[D,P]=(0,i.useState)(!1),[I,R]=(0,i.useState)(""),M=()=>{S(null)};return(0,t.jsxs)(l.A,{sx:{display:"flex",minHeight:"100vh"},children:[(0,t.jsx)(E,{open:C,onClose:()=>w(!1)}),(0,t.jsxs)(l.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,t.jsx)(c.A,{position:"sticky",elevation:1,sx:{backgroundColor:"background.paper",color:"text.primary",borderBottom:1,borderColor:"divider"},children:(0,t.jsxs)(d.A,{children:[(0,t.jsx)(x.A,{edge:"start",color:"inherit",onClick:()=>{w(!C)},sx:{mr:2},children:(0,t.jsx)(m.A,{})}),(0,t.jsx)(h.A,{variant:"h6",component:"div",sx:{flexGrow:1,fontWeight:600},children:"WorkerNet Portal"}),(0,t.jsx)(l.A,{sx:{flexGrow:1,maxWidth:400,mx:2},children:(0,t.jsx)(oe,{placeholder:"Поиск тикетов, пользователей, статей...",onSearch:R,showSuggestions:!0})}),(0,t.jsx)(q,{variant:"icon"}),k&&(0,t.jsx)(v.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,t.jsx)(L,{variant:"icon"})}),(0,t.jsx)(x.A,{color:"inherit",sx:{mr:1},onClick:()=>P(!0),children:(0,t.jsx)(p.A,{badgeContent:4,color:"error",children:(0,t.jsx)(g.A,{})})}),(0,t.jsx)(x.A,{color:"inherit",sx:{mr:1},children:(0,t.jsx)(y.A,{})}),(0,t.jsx)(x.A,{onClick:e=>{S(e.currentTarget)},color:"inherit",children:(0,t.jsx)(u.A,{sx:{width:32,height:32},children:(0,t.jsx)(b.A,{})})}),(0,t.jsxs)(A.A,{anchorEl:z,open:Boolean(z),onClose:M,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,t.jsxs)(j.A,{onClick:M,children:[(0,t.jsx)(b.A,{sx:{mr:1}}),e("navigation.profile")]}),(0,t.jsxs)(j.A,{onClick:M,children:[(0,t.jsx)(y.A,{sx:{mr:1}}),e("navigation.settings")]}),(0,t.jsx)(j.A,{onClick:M,children:e("navigation.logout")})]})]})}),(0,t.jsx)(l.A,{component:"main",sx:{flexGrow:1,p:3,backgroundColor:"background.default",minHeight:"calc(100vh - 64px)"},children:(0,t.jsx)(v.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,t.jsx)(o.sv,{})})})]}),(0,t.jsx)(he,{open:D,onClose:()=>P(!1),notifications:[{id:"1",title:"Новый тикет #1234",message:'Создан новый тикет "Проблема с доступом"',type:"info",timestamp:new Date,read:!1},{id:"2",title:"Тикет #1233 решен",message:'Тикет "Ошибка в отчете" был успешно решен',type:"success",timestamp:new Date(Date.now()-18e5),read:!1},{id:"3",title:"Эскалация тикета #1232",message:'Тикет "Критическая ошибка" требует внимания',type:"error",timestamp:new Date(Date.now()-36e5),read:!0}],onMarkAsRead:e=>console.log("Mark as read:",e),onDelete:e=>console.log("Delete:",e),onMarkAllAsRead:()=>console.log("Mark all as read"),onClearAll:()=>console.log("Clear all")})]})}}}]);
//# sourceMappingURL=bundle.6b494f4e073ef6ec4cbf.js.map